<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>teXbet ‚Äî –û—Ñ—ñ—Ü—ñ–π–Ω–∏–π –±—É–∫–º–µ–∫–µ—Ä—Å—å–∫–∏–π —Å–∞–π—Ç</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto&display=swap" rel="stylesheet" />
<!-- Animate.css -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />
<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

<style>
  :root {
    --color-primary: #00bfff;
    --color-primary-dark: #0096d6;
    --color-bg-dark: #0d1b2a;
    --color-bg-light: #f9f9f9;
    --color-text-dark: #e0e6f2;
    --color-text-light: #333;
    --color-card-bg: #1b263b;
    --color-card-bg-light: #ffffff;
  }

  body {
    font-family: 'Roboto', sans-serif;
    background: var(--color-bg-dark);
    color: var(--color-text-dark);
    overflow-x: hidden;
    transition: background 0.5s, color 0.5s;
  }

  body.light-theme {
    background: var(--color-bg-light);
    color: var(--color-text-light);
  }

  header {
    background: #14213d;
    padding: 20px 40px;
    box-shadow: 0 0 25px var(--color-primary);
    position: sticky;
    top: 0;
    z-index: 1050;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  body.light-theme header {
    background: #dce6f1;
    box-shadow: 0 0 25px var(--color-primary-dark);
    color: var(--color-text-light);
  }

  .logo {
    font-family: 'Orbitron', sans-serif;
    font-size: 2.7rem;
    color: var(--color-primary);
    text-shadow: 0 0 15px var(--color-primary);
    animation: pulse 2s infinite;
    cursor: default;
  }
  body.light-theme .logo {
    color: var(--color-primary-dark);
    text-shadow: none;
  }

  @keyframes pulse {
    0%, 100% { text-shadow: 0 0 8px var(--color-primary); }
    50% { text-shadow: 0 0 16px #00e0ff; }
  }

  nav ul.nav {
    list-style: none;
    display: flex;
    gap: 20px;
    margin: 0;
    padding: 0;
  }

  nav ul.nav li.nav-item a.nav-link {
    color: var(--color-text-dark);
    font-weight: 600;
    font-size: 1.1rem;
    border-radius: 8px;
    padding: 6px 14px;
    transition: background-color 0.3s, color 0.3s;
    cursor: pointer;
    text-decoration: none;
  }
  nav ul.nav li.nav-item a.nav-link:hover {
    background-color: var(--color-primary);
    color: #14213d !important;
  }
  nav ul.nav li.nav-item a.nav-link.active {
    color: #14213d !important;
    background-color: var(--color-primary);
    font-weight: 700;
  }
  body.light-theme nav ul.nav li.nav-item a.nav-link {
    color: var(--color-text-light);
  }
  body.light-theme nav ul.nav li.nav-item a.nav-link:hover,
  body.light-theme nav ul.nav li.nav-item a.nav-link.active {
    color: #dce6f1 !important;
    background-color: var(--color-primary-dark);
  }

  main.tab-content {
    padding: 25px 15px 50px;
    max-width: 1100px;
    margin: auto;
  }

  /* Match cards and casino cards styling */
  .match-card, .casino-card, .news-item {
    background: var(--color-card-bg);
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 0 12px var(--color-primary + "88");
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  body.light-theme .match-card,
  body.light-theme .casino-card,
  body.light-theme .news-item {
    background: var(--color-card-bg-light);
    color: var(--color-text-light);
    box-shadow: 0 0 12px var(--color-primary-dark + "88");
  }
  .match-card:hover, .casino-card:hover {
    transform: scale(1.05);
    box-shadow: 0 0 20px var(--color-primary);
  }

  .casino-card {
    text-align: center;
    font-size: 1.2rem;
    font-weight: 700;
    color: #00d4ff;
    cursor: pointer;
  }
  body.light-theme .casino-card {
    color: var(--color-primary-dark);
  }

  .balance-box {
    color: var(--color-primary);
    font-weight: 700;
    margin-top: 10px;
    font-size: 1.3rem;
  }
  body.light-theme .balance-box {
    color: var(--color-primary-dark);
  }

  footer {
    text-align: center;
    padding: 20px 10px;
    background: #14213d;
    color: var(--color-primary);
    font-family: 'Orbitron', sans-serif;
    border-top: 1px solid #00bfff44;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1040;
  }
  body.light-theme footer {
    background: #dce6f1;
    color: var(--color-primary-dark);
    border-top: 1px solid var(--color-primary-dark + "44");
  }

  /* Responsive */
  @media (max-width: 767px) {
    header {
      flex-wrap: wrap;
      padding: 15px 20px;
    }
    .logo {
      font-size: 2rem;
      margin-bottom: 10px;
      flex-basis: 100%;
      text-align: center;
    }
    nav ul.nav {
      justify-content: center;
      flex-wrap: wrap;
      gap: 12px;
    }
    main.tab-content {
      padding: 15px 10px 70px;
    }
  }

  /* Buttons */
  button {
    font-weight: 600;
  }
  button:disabled {
    opacity: 0.6;
  }

  /* Bet slip */
  #bet-slip {
    position: fixed;
    right: 20px;
    top: 90px;
    width: 300px;
    max-height: 70vh;
    overflow-y: auto;
    background: var(--color-card-bg);
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 0 18px var(--color-primary);
    z-index: 1100;
  }
  body.light-theme #bet-slip {
    background: var(--color-card-bg-light);
    box-shadow: 0 0 18px var(--color-primary-dark);
  }
  #bet-slip h5 {
    font-family: 'Orbitron', sans-serif;
    color: var(--color-primary);
    margin-bottom: 12px;
  }
  #bet-slip ul {
    list-style: none;
    padding-left: 0;
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: 12px;
  }
  #bet-slip ul li {
    padding: 8px 6px;
    border-bottom: 1px solid var(--color-primary + "44");
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  body.light-theme #bet-slip ul li {
    border-color: var(--color-primary-dark + "44");
  }
  #bet-slip ul li button {
    border: none;
    background: transparent;
    color: var(--color-primary);
    cursor: pointer;
    font-size: 1.1rem;
  }
  body.light-theme #bet-slip ul li button {
    color: var(--color-primary-dark);
  }
  #bet-slip .total {
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 12px;
  }
  #bet-slip button.place-bet-btn {
    width: 100%;
  }

  /* Login/Register toggle */
  .auth-toggle {
    cursor: pointer;
    color: var(--color-primary);
    text-decoration: underline;
    font-weight: 600;
  }
  body.light-theme .auth-toggle {
    color: var(--color-primary-dark);
  }

  /* Casino Slot */
  #slot-reel {
    font-size: 3.5rem;
    letter-spacing: 10px;
    user-select: none;
    margin-bottom: 15px;
  }
  #slot-message {
    margin-top: 10px;
    font-weight: 700;
  }

  /* Theme toggle button */
  #theme-toggle-btn {
    cursor: pointer;
    border: none;
    background: transparent;
    color: var(--color-primary);
    font-size: 1.5rem;
  }
  body.light-theme #theme-toggle-btn {
    color: var(--color-primary-dark);
  }
</style>
</head>
<body>

<header>
  <div class="logo">teXbet</div>
  <nav>
    <ul class="nav" id="nav-tabs">
      <li class="nav-item"><a class="nav-link active" data-tab="live">Live</a></li>
      <li class="nav-item"><a class="nav-link" data-tab="casino">–ö–∞–∑–∏–Ω–æ</a></li>
      <li class="nav-item"><a class="nav-link" data-tab="news">–ù–æ–≤–∏–Ω–∏</a></li>
      <li class="nav-item"><a class="nav-link" data-tab="profile">–ö–∞–±—ñ–Ω–µ—Ç</a></li>
    </ul>
  </nav>
  <button id="theme-toggle-btn" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É" aria-label="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É"><i class="fa-solid fa-sun"></i></button>
</header>

<main class="tab-content container">
  <!-- Live matches -->
  <section id="live" class="tab-pane active animate__animated animate__fadeIn">
    <h2>üéØ Live-–º–∞—Ç—á—ñ</h2>
    <div class="row" id="matches"></div>
  </section>

  <!-- Casino -->
  <section id="casino" class="tab-pane animate__animated animate__fadeIn" style="display:none;">
    <h2>üé∞ –ö–∞–∑–∏–Ω–æ (–¥–µ–º–æ)</h2>
    <div class="casino-game text-center mb-4">
      <div id="slot-reel">üçí üçã üçä</div>
      <button class="btn btn-primary" id="spin-slot-btn">–ì—Ä–∞—Ç–∏ –≤ —Å–ª–æ—Ç</button>
      <div id="slot-message"></div>
    </div>
  </section>

  <!-- News -->
  <section id="news" class="tab-pane animate__animated animate__fadeIn" style="display:none;">
    <h2>üì∞ –û—Å—Ç–∞–Ω–Ω—ñ –Ω–æ–≤–∏–Ω–∏</h2>
    <ul class="list-group list-group-flush mt-3" id="news-list"></ul>
  </section>

  <!-- Profile -->
  <section id="profile" class="tab-pane animate__animated animate__fadeIn" style="display:none; max-width: 400px; margin: auto;">
    <h2>üë§ –û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç</h2>
    <div class="balance-box" id="balance">–ë–∞–ª–∞–Ω—Å: 1000 –≥—Ä–Ω</div>

    <div id="auth-forms">
      <!-- Login form -->
      <form id="login-form" class="mt-4">
        <div class="mb-3">
          <input type="text" class="form-control" id="login-username" placeholder="–õ–æ–≥—ñ–Ω" required />
        </div>
        <div class="mb-3">
          <input type="password" class="form-control" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required />
        </div>
        <button type="submit" class="btn btn-primary w-100">–£–≤—ñ–π—Ç–∏</button>
        <p class="mt-3 text-center">
          –ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç—É? <span class="auth-toggle" id="show-register">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</span>
        </p>
      </form>

      <!-- Register form -->
      <form id="register-form" class="mt-4" style="display:none;">
        <div class="mb-3">
          <input type="text" class="form-control" id="register-username" placeholder="–õ–æ–≥—ñ–Ω" required />
        </div>
        <div class="mb-3">
          <input type="password" class="form-control" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å" required />
        </div>
        <button type="submit" class="btn btn-success w-100">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
        <p class="mt-3 text-center">
          –í–∂–µ —î –∞–∫–∞—É–Ω—Ç? <span class="auth-toggle" id="show-login">–£–≤—ñ–π—Ç–∏</span>
        </p>
      </form>
    </div>

    <button class="btn btn-success mt-3 w-100" id="replenish-btn">–ü–æ–ø–æ–≤–Ω–∏—Ç–∏ –¥–µ–º–æ –±–∞–ª–∞–Ω—Å</button>
    <button class="btn btn-danger mt-3 w-100" id="logout-btn" style="display:none;">–í–∏–π—Ç–∏</button>
  </section>
</main>

<!-- Bet slip -->
<div id="bet-slip" style="display:none;">
  <h5>–ö–æ—à–∏–∫ —Å—Ç–∞–≤–æ–∫</h5>
  <ul id="bet-list"></ul>
  <div class="total">–í—Å—å–æ–≥–æ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç: <span id="total-coef">0</span></div>
  <div class="mb-3">
    <input type="number" id="bet-amount" class="form-control" placeholder="–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É —Å—Ç–∞–≤–∫–∏ (–≥—Ä–Ω)" min="1" />
  </div>
  <button class="btn btn-success place-bet-btn" id="place-bet-btn" disabled>–ó—Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫—É</button>
</div>

<footer>
  ¬© 2025 teXbet ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –±—É–∫–º–µ–∫–µ—Ä—Å—å–∫–∏–π —Å–∞–π—Ç –≤—ñ–¥ –í–∞–¥–∏–º–∞ –ì–æ–ª–æ–≤–Ω—ñ–Ω–∞
</footer>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
(() => {
  // --- VARIABLES ---
  const tabs = document.querySelectorAll('nav ul.nav li.nav-item a.nav-link');
  const sections = document.querySelectorAll('main > section');
  const balanceBox = document.getElementById('balance');
  const betSlip = document.getElementById('bet-slip');
  const betList = document.getElementById('bet-list');
  const totalCoefSpan = document.getElementById('total-coef');
  const betAmountInput = document.getElementById('bet-amount');
  const placeBetBtn = document.getElementById('place-bet-btn');
  const replenishBtn = document.getElementById('replenish-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const themeToggleBtn = document.getElementById('theme-toggle-btn');
  const slotReel = document.getElementById('slot-reel');
  const spinSlotBtn = document.getElementById('spin-slot-btn');
  const slotMessage = document.getElementById('slot-message');

  const loginForm = document.getElementById('login-form');
  const registerForm = document.getElementById('register-form');
  const showRegister = document.getElementById('show-register');
  const showLogin = document.getElementById('show-login');

  // --- DATA ---
  const casinoSymbols = ['üçí', 'üçã', 'üçä', 'üçâ', 'üçá', '‚≠ê', 'üîî', '7Ô∏è‚É£'];

  // Users storage (demo only, in localStorage)
  // Format: { username: {password: "...", balance: number} }
  let users = JSON.parse(localStorage.getItem('teXbetUsers')) || {};
  let currentUser = JSON.parse(localStorage.getItem('teXbetCurrentUser')) || null;
  let betSlipItems = [];

  // Matches sample data
  const matches = [
    {id:1, home: "–®–∞—Ö—Ç–∞—Ä", away: "–î–∏–Ω–∞–º–æ", time: "18:00", coef: [2.4, 3.1, 2.9]},
    {id:2, home: "–ß–µ–ª—Å—ñ", away: "–ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω", time: "20:45", coef: [2.7, 3.0, 2.6]},
    {id:3, home: "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞", away: "–†–µ–∞–ª", time: "21:30", coef: [2.9, 3.2, 2.5]},
  ];

  // News sample data
  const news = [
    "–£–∫—Ä–∞—ó–Ω–∞ –æ–±—ñ–≥—Ä–∞–ª–∞ –ê–Ω–≥–ª—ñ—é –≤ —Å–µ—Ä—ñ—ó –ø–µ–Ω–∞–ª—å—Ç—ñ!",
    "–ö–∞–∑–∏–Ω–æ-–¥–æ–¥–∞—Ç–æ–∫ teXbet —Å–∫–æ—Ä–æ –≤ App Store!",
    "–î–µ–º–æ-—Ä–µ–∂–∏–º Aviator —Ç–µ–ø–µ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π —É—Å—ñ–º!",
    "–ß–µ–º–ø—ñ–æ–Ω–∞—Ç –Ñ–≤—Ä–æ–ø–∏ —Å—Ç–∞—Ä—Ç—É—î –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–∏–∂–Ω—è",
  ];

  // --- FUNCTIONS ---

  // Switch tabs
  function switchTab(tabName) {
    tabs.forEach(t => {
      t.classList.toggle('active', t.dataset.tab === tabName);
    });
    sections.forEach(s => {
      s.style.display = s.id === tabName ? 'block' : 'none';
    });
  }

  // Render matches
  function renderMatches() {
    const container = document.getElementById('matches');
    container.innerHTML = '';
    matches.forEach(match => {
      const div = document.createElement('div');
      div.className = 'col-md-6';
      div.innerHTML = `
        <div class="match-card animate__animated animate__fadeInUp">
          <h5>${match.home} vs ${match.away}</h5>
          <p>–ß–∞—Å: ${match.time}</p>
          <p>–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏: 
            <button class="btn btn-sm btn-outline-info bet-btn" data-match-id="${match.id}" data-coef="${match.coef[0]}" data-prediction="–ü–µ—Ä–µ–º–æ–≥–∞ ${match.home}">${match.coef[0]}</button> /
            <button class="btn btn-sm btn-outline-info bet-btn" data-match-id="${match.id}" data-coef="${match.coef[1]}" data-prediction="–ù—ñ—á–∏—è">${match.coef[1]}</button> /
            <button class="btn btn-sm btn-outline-info bet-btn" data-match-id="${match.id}" data-coef="${match.coef[2]}" data-prediction="–ü–µ—Ä–µ–º–æ–≥–∞ ${match.away}">${match.coef[2]}</button>
          </p>
        </div>
      `;
      container.appendChild(div);
    });
  }

  // Render news
  function renderNews() {
    const newsList = document.getElementById('news-list');
    newsList.innerHTML = '';
    news.forEach(item => {
      const li = document.createElement('li');
      li.className = 'list-group-item bg-dark text-light';
      li.textContent = item;
      newsList.appendChild(li);
    });
  }

  // Update balance display
  function updateBalance() {
    if (currentUser && users[currentUser]) {
      balanceBox.textContent = `–ë–∞–ª–∞–Ω—Å: ${users[currentUser].balance.toFixed(2)} –≥—Ä–Ω`;
    } else {
      balanceBox.textContent = '–ë–∞–ª–∞–Ω—Å: 0 –≥—Ä–Ω';
    }
  }

  // Show bet slip
  function showBetSlip() {
    if (betSlipItems.length > 0) {
      betSlip.style.display = 'block';
      renderBetSlip();
    } else {
      betSlip.style.display = 'none';
    }
  }

  // Render bet slip
  function renderBetSlip() {
    betList.innerHTML = '';
    let totalCoef = 1;
    betSlipItems.forEach((bet, idx) => {
      totalCoef *= bet.coef;
      const li = document.createElement('li');
      li.textContent = `${bet.prediction} (${bet.coef})`;
      const btn = document.createElement('button');
      btn.innerHTML = '&times;';
      btn.title = '–í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞–≤–∫—É';
      btn.onclick = () => {
        betSlipItems.splice(idx, 1);
        renderBetSlip();
        showBetSlip();
      };
      li.appendChild(btn);
      betList.appendChild(li);
    });
    totalCoefSpan.textContent = totalCoef.toFixed(2);
    placeBetBtn.disabled = !currentUser || betSlipItems.length === 0 || betAmountInput.value <= 0;
  }

  // Add bet
  function addBet(matchId, coef, prediction) {
    if (!currentUser) {
      alert('–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å —â–æ–± —Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫–∏');
      return;
    }
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ –≤–∂–µ —î —Å—Ç–∞–≤–∫–∞ –Ω–∞ —Ü–µ–π –º–∞—Ç—á –∑ —Ç–∞–∫–∏–º –ø—Ä–æ–≥–Ω–æ–∑–æ–º
    if (betSlipItems.find(b => b.matchId === matchId && b.prediction === prediction)) {
      alert('–í–∏ –≤–∂–µ –¥–æ–¥–∞–ª–∏ —Ü—é —Å—Ç–∞–≤–∫—É –≤ –∫–æ—à–∏–∫');
      return;
    }
    betSlipItems.push({matchId, coef: +coef, prediction});
    renderBetSlip();
    showBetSlip();
  }

  // Place bet
  function placeBet() {
    const amount = parseFloat(betAmountInput.value);
    if (!amount || amount <= 0) {
      alert('–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É —Å—É–º—É —Å—Ç–∞–≤–∫–∏');
      return;
    }
    if (!currentUser) {
      alert('–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å —â–æ–± —Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫–∏');
      return;
    }
    if (users[currentUser].balance < amount) {
      alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ');
      return;
    }
    users[currentUser].balance -= amount;
    localStorage.setItem('teXbetUsers', JSON.stringify(users));
    updateBalance();
    alert(`–°—Ç–∞–≤–∫–∞ –∑—Ä–æ–±–ª–µ–Ω–∞! –°—É–º–∞: ${amount} –≥—Ä–Ω, –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç: ${totalCoefSpan.textContent}`);
    betSlipItems = [];
    renderBetSlip();
    showBetSlip();
    betAmountInput.value = '';
  }

  // Replenish demo balance
  function replenishBalance() {
    if (!currentUser) {
      alert('–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å —â–æ–± –ø–æ–ø–æ–≤–Ω–∏—Ç–∏ –±–∞–ª–∞–Ω—Å');
      return;
    }
    let amountStr = prompt('–°–∫—ñ–ª—å–∫–∏ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–ø–æ–≤–Ω–∏—Ç–∏ –¥–µ–º–æ –±–∞–ª–∞–Ω—Å (–≥—Ä–Ω)?', '500');
    if (!amountStr) return;
    let amount = parseFloat(amountStr);
    if (isNaN(amount) || amount <= 0) {
      alert('–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–µ —á–∏—Å–ª–æ');
      return;
    }
    users[currentUser].balance += amount;
    localStorage.setItem('teXbetUsers', JSON.stringify(users));
    updateBalance();
    alert(`–î–µ–º–æ –±–∞–ª–∞–Ω—Å –ø–æ–ø–æ–≤–Ω–µ–Ω–æ –Ω–∞ ${amount.toFixed(2)} –≥—Ä–Ω`);
  }

  // Handle login
  function login(username, password) {
    if (!users[username]) {
      alert('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
      return false;
    }
    if (users[username].password !== password) {
      alert('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å');
      return false;
    }
    currentUser = username;
    localStorage.setItem('teXbetCurrentUser', JSON.stringify(currentUser));
    alert(`–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ, ${username}!`);
    updateBalance();
    showProfileForUser();
    return true;
  }

  // Handle register
  function register(username, password) {
    if (users[username]) {
      alert('–¢–∞–∫–∏–π –ª–æ–≥—ñ–Ω –≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π');
      return false;
    }
    users[username] = {password, balance: 1000};
    localStorage.setItem('teXbetUsers', JSON.stringify(users));
    alert(`–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞! –í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 1000 –≥—Ä–Ω –¥–µ–º–æ –±–∞–ª–∞–Ω—Å—É.`);
    return true;
  }

  // Logout
  function logout() {
    currentUser = null;
    localStorage.removeItem('teXbetCurrentUser');
    updateBalance();
    showProfileForGuest();
    betSlipItems = [];
    renderBetSlip();
    showBetSlip();
  }

  // Show profile for logged user
  function showProfileForUser() {
    document.getElementById('login-form').style.display = 'none';
    document.getElementById('register-form').style.display = 'none';
    replenishBtn.style.display = 'block';
    logoutBtn.style.display = 'block';
    betSlip.style.display = betSlipItems.length > 0 ? 'block' : 'none';
  }

  // Show profile for guest (not logged in)
  function showProfileForGuest() {
    document.getElementById('login-form').style.display = 'block';
    document.getElementById('register-form').style.display = 'none';
    replenishBtn.style.display = 'none';
    logoutBtn.style.display = 'none';
    betSlip.style.display = 'none';
  }

  // Toggle between login and register forms
  showRegister.addEventListener('click', () => {
    document.getElementById('login-form').style.display = 'none';
    document.getElementById('register-form').style.display = 'block';
  });
  showLogin.addEventListener('click', () => {
    document.getElementById('register-form').style.display = 'none';
    document.getElementById('login-form').style.display = 'block';
  });

  // Theme toggling
  function setTheme(theme) {
    if (theme === 'light') {
      document.body.classList.add('light-theme');
      themeToggleBtn.innerHTML = '<i class="fa-solid fa-moon"></i>';
      localStorage.setItem('teXbetTheme', 'light');
    } else {
      document.body.classList.remove('light-theme');
      themeToggleBtn.innerHTML = '<i class="fa-solid fa-sun"></i>';
      localStorage.setItem('teXbetTheme', 'dark');
    }
  }
  themeToggleBtn.addEventListener('click', () => {
    if (document.body.classList.contains('light-theme')) {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  });
  // Load theme on start
  const savedTheme = localStorage.getItem('teXbetTheme') || 'dark';
  setTheme(savedTheme);

  // --- EVENT LISTENERS ---

  // Tabs click
  tabs.forEach(tab => {
    tab.addEventListener('click', e => {
      e.preventDefault();
      switchTab(tab.dataset.tab);
    });
  });

  // Bets buttons on matches
  document.getElementById('matches').addEventListener('click', e => {
    if (e.target.classList.contains('bet-btn')) {
      const matchId = +e.target.dataset.matchId;
      const coef = e.target.dataset.coef;
      const prediction = e.target.dataset.prediction;
      addBet(matchId, coef, prediction);
    }
  });

  // Bet amount input
  betAmountInput.addEventListener('input', () => {
    placeBetBtn.disabled = !currentUser || betSlipItems.length === 0 || betAmountInput.value <= 0;
  });

  // Place bet button
  placeBetBtn.addEventListener('click', placeBet);

  // Replenish balance
  replenishBtn.addEventListener('click', replenishBalance);

  // Logout
  logoutBtn.addEventListener('click', () => {
    logout();
    alert('–í–∏ –≤–∏–π—à–ª–∏ –∑ –∞–∫–∞—É–Ω—Ç—É');
  });

  // Login form submit
  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('login-username').value.trim();
    const password = document.getElementById('login-password').value.trim();
    if (login(username, password)) {
      loginForm.reset();
    }
  });

  // Register form submit
  registerForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('register-username').value.trim();
    const password = document.getElementById('register-password').value.trim();
    if (register(username, password)) {
      registerForm.reset();
      document.getElementById('register-form').style.display = 'none';
      document.getElementById('login-form').style.display = 'block';
    }
  });

  // --- Casino slot machine logic ---
  spinSlotBtn.addEventListener('click', () => {
    spinSlotBtn.disabled = true;
    slotMessage.textContent = '';

    let spins = 10;
    let reel = ['', '', ''];

    const spinInterval = setInterval(() => {
      for(let i=0; i<3; i++) {
        reel[i] = casinoSymbols[Math.floor(Math.random() * casinoSymbols.length)];
      }
      slotReel.textContent = reel.join(' ');
      spins--;
      if(spins === 0) {
        clearInterval(spinInterval);
        spinSlotBtn.disabled = false;
        // Check if all symbols equal
        if (reel[0] === reel[1] && reel[1] === reel[2]) {
          slotMessage.textContent = 'üéâ –í–∏ –≤–∏–≥—Ä–∞–ª–∏! +500 –≥—Ä–Ω –¥–æ –±–∞–ª–∞–Ω—Å—É!';
          if(currentUser) {
            users[currentUser].balance += 500;
            localStorage.setItem('teXbetUsers', JSON.stringify(users));
            updateBalance();
          } else {
            slotMessage.textContent += ' (–£–≤—ñ–π–¥—ñ—Ç—å –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∏–≥—Ä–∞—à—É)';
          }
        } else {
          slotMessage.textContent = '–°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑!';
        }
      }
    }, 150);
  });

  // --- INITIAL SETUP ---
  renderMatches();
  renderNews();
  updateBalance();

  if(currentUser) {
    showProfileForUser();
  } else {
    showProfileForGuest();
  }

  showBetSlip();
  switchTab('live');
})();
</script>

</body>
</html>
