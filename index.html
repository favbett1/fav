<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>teXbet ‚Äî –±—É–∫–º–µ–∫–µ—Ä—Å—å–∫–∏–π —Å–∞–π—Ç –≤—ñ–¥ –ì–æ–ª–æ–≤–Ω—ñ–Ω–∞ –í–∞–¥–∏–º–∞</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');

  *, *::before, *::after { box-sizing: border-box; }
  body {
    margin:0; padding:0;
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(135deg, #0d1b2a, #1b263b);
    color: #e0e6f2;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    background: #14213d;
    padding: 20px 40px;
    display: flex; justify-content: space-between; align-items: center;
    box-shadow: 0 0 25px #00bfff88;
    user-select: none;
  }
  .logo {
    font-family: 'Orbitron', sans-serif;
    font-weight: 900;
    font-size: 2.4rem;
    color: #00bfff;
    letter-spacing: 0.15em;
    text-shadow: 0 0 15px #00bfff;
  }
  nav {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  nav button {
    background: transparent;
    border: none;
    color: #a9bcd0;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    padding: 10px 20px;
    border-radius: 12px;
    transition:
      color 0.3s ease,
      background 0.3s ease,
      transform 0.15s ease;
    user-select: none;
  }
  nav button:hover, nav button.active {
    color: #14213d;
    background: #00bfff;
    transform: scale(1.1);
    box-shadow: 0 0 10px #00bfffaa;
  }
  main {
    flex-grow: 1;
    max-width: 1100px;
    margin: 30px auto;
    width: 95%;
    padding-bottom: 60px;
  }
  section {
    display: none;
    animation: fadeIn 0.6s ease forwards;
  }
  section.active {
    display: block;
  }
  .match {
    background: #1b263b;
    border-radius: 16px;
    box-shadow: 0 0 15px #00bfff80;
    margin-bottom: 22px;
    padding: 25px 30px;
    transition: box-shadow 0.4s ease;
  }
  .match:hover {
    box-shadow: 0 0 25px #00bfffcc;
  }
  .match h3 {
    margin: 0 0 12px;
    font-size: 1.5rem;
    color: #00bfff;
    user-select: text;
  }
  .odds {
    display: flex;
    justify-content: space-around;
    font-size: 1.2rem;
    margin-bottom: 12px;
  }
  .odds div {
    flex: 1;
    text-align: center;
    user-select: text;
    color: #d1d9e6;
  }
  .odds div strong {
    display: block;
    font-size: 1.4rem;
    color: #00bfff;
    margin-bottom: 4px;
  }
  .time {
    font-size: 1rem;
    color: #7a8ca7;
    margin-bottom: 18px;
  }
  button.bet-btn {
    width: 100%;
    padding: 14px 0;
    background: linear-gradient(90deg, #00bfff, #005f99);
    border: none;
    border-radius: 20px;
    font-weight: 900;
    font-size: 1.3rem;
    color: #14213d;
    cursor: pointer;
    box-shadow: 0 0 12px #00bfffaa;
    transition: background 0.3s ease, transform 0.15s ease;
    user-select: none;
  }
  button.bet-btn:hover {
    background: linear-gradient(90deg, #005f99, #00bfff);
    transform: scale(1.07);
  }
  .modal {
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(10, 10, 30, 0.95);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  .modal.show {
    opacity: 1;
    pointer-events: all;
  }
  .modal-content {
    background: #14213d;
    border-radius: 20px;
    padding: 35px 30px 40px;
    width: 100%;
    max-width: 440px;
    box-shadow: 0 0 30px #00bfffaa;
    user-select: none;
  }
  .modal-content h2 {
    margin-top: 0;
    color: #00bfff;
    font-family: 'Orbitron', sans-serif;
    font-weight: 900;
    font-size: 2rem;
  }
  .modal-content p {
    margin: 18px 0 20px;
    font-size: 1.1rem;
    color: #a9bcd0;
  }
  .modal-content input[type=number], .modal-content input[type=text], .modal-content input[type=password] {
    width: 100%;
    padding: 15px 18px;
    font-size: 1.2rem;
    border-radius: 14px;
    border: 2px solid #00bfff;
    background: #1b263b;
    color: #d1d9e6;
    outline-offset: 4px;
    user-select: text;
    margin-bottom: 15px;
  }
  .modal-content input[type=number]:focus, 
  .modal-content input[type=text]:focus, 
  .modal-content input[type=password]:focus {
    border-color: #00e0ff;
    outline: none;
  }
  .modal-content button {
    margin-top: 10px;
    background: #00bfff;
    border: none;
    border-radius: 20px;
    padding: 15px 0;
    font-weight: 900;
    font-size: 1.3rem;
    color: #14213d;
    cursor: pointer;
    width: 100%;
    box-shadow: 0 0 12px #00bfffcc;
    transition: background 0.3s ease;
    user-select: none;
  }
  .modal-content button:hover {
    background: #00e0ff;
  }
  .modal-content button.cancel {
    background: transparent;
    color: #00bfff;
    margin-top: 16px;
    border: 2px solid #00bfff;
  }
  .modal-content button.cancel:hover {
    background: #003359;
    color: #00e0ff;
  }
  .news-item {
    background: #1b263b;
    margin-bottom: 18px;
    padding: 20px 28px;
    border-radius: 20px;
    border: 2px solid #00bfff;
    user-select: text;
    font-size: 1.1rem;
    line-height: 1.4;
    transition: background 0.3s ease;
    cursor: default;
  }
  .news-item:hover {
    background: #002040;
  }
  .casino-list {
    display: flex;
    gap: 28px;
    flex-wrap: wrap;
    user-select: none;
  }
  .casino-item {
    flex: 1 1 280px;
    background: #1b263b;
    padding: 28px 20px;
    border-radius: 22px;
    border: 2px solid #00bfff;
    text-align: center;
    font-size: 1.25rem;
    font-weight: 700;
    color: #00bfff;
    cursor: pointer;
    box-shadow: 0 0 15px #00bfff99;
    transition: box-shadow 0.3s ease, transform 0.15s ease;
  }
  .casino-item:hover {
    box-shadow: 0 0 25px #00bfffcc;
    transform: scale(1.07);
  }
  footer {
    text-align: center;
    padding: 22px 15px;
    font-weight: 700;
    color: #00bfff;
    font-family: 'Orbitron', sans-serif;
    user-select: none;
    letter-spacing: 0.12em;
    border-top: 1px solid #00bfff44;
  }
  @media (max-width: 700px) {
    nav button {
      font-size: 0.9rem;
      padding: 8px 15px;
    }
    main {
      margin: 20px auto;
      width: 90%;
      padding-bottom: 50px;
    }
    .casino-list {
      flex-direction: column;
      gap: 20px;
    }
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(15px);}
    to {opacity: 1; transform: translateY(0);}
  }
  #bet-history {
    margin-top: 32px;
    max-height: 160px;
    overflow-y: auto;
    background: #14213d;
    border-radius: 16px;
    padding: 20px 25px;
    font-size: 1rem;
    color: #7aa7f7;
    box-shadow: inset 0 0 8px #00bfff44;
  }
  #bet-history h3 {
    margin-top: 0;
    font-family: 'Orbitron', sans-serif;
    color: #00bfff;
    font-weight: 900;
    font-size: 1.3rem;
    user-select: none;
  }
  #bet-history ul {
    list-style: none;
    padding-left: 0;
    margin: 8px 0 0 0;
  }
  #bet-history li {
    margin-bottom: 10px;
    border-bottom: 1px solid #003459;
    padding-bottom: 6px;
    user-select: text;
  }
  #user-info {
    color: #00bfff;
    font-weight: 700;
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    margin-left: 15px;
    user-select: none;
  }
</style>
</head>
<body>
<header>
  <div class="logo" aria-label="–õ–æ–≥–æ—Ç–∏–ø teXbet">teXbet</div>
  <nav role="navigation" aria-label="–ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é">
    <button id="tab-live" class="active" aria-controls="live" aria-selected="true">Live —Å—Ç–∞–≤–∫–∏</button>
    <button id="tab-news" aria-controls="news" aria-selected="false">–ù–æ–≤–∏–Ω–∏</button>
    <button id="tab-casino" aria-controls="casino" aria-selected="false">–ö–∞–∑–∏–Ω–æ</button>
    <button id="tab-login" aria-controls="login" aria-selected="false">–í—Ö—ñ–¥ / –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
  </nav>
  <div id="user-info" aria-live="polite" aria-atomic="true"></div>
</header>
<main>
  <section id="live" class="active" aria-label="Live —Å—Ç–∞–≤–∫–∏" tabindex="0">
    <h2>üéØ Live-–º–∞—Ç—á—ñ</h2>
    <div id="matches-container" role="list" aria-live="polite" aria-atomic="true"></div>
    <div id="bet-history" aria-label="–Ü—Å—Ç–æ—Ä—ñ—è —Å—Ç–∞–≤–æ–∫">
      <h3>–Ü—Å—Ç–æ—Ä—ñ—è —Å—Ç–∞–≤–æ–∫</h3>
      <ul id="history-list"></ul>
    </div>
  </section>
  <section id="news" aria-label="–ù–æ–≤–∏–Ω–∏" tabindex="0">
    <h2>üì∞ –°–ø–æ—Ä—Ç–∏–≤–Ω—ñ –Ω–æ–≤–∏–Ω–∏</h2>
    <div id="news-container"></div>
  </section>
  <section id="casino" aria-label="–ö–∞–∑–∏–Ω–æ" tabindex="0">
    <h2>üé∞ –ö–∞–∑–∏–Ω–æ</h2>
    <div class="casino-list" id="casino-container"></div>
  </section>
  <section id="login" aria-label="–í—Ö—ñ–¥ —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è" tabindex="0">
    <h2>üîë –í—Ö—ñ–¥ / –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
    <form id="login-form" aria-label="–§–æ—Ä–º–∞ –≤—Ö–æ–¥—É">
      <input type="text" id="username" placeholder="–õ–æ–≥—ñ–Ω" autocomplete="username" required aria-required="true" />
      <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="current-password" required aria-required="true" />
      <button type="submit" id="login-btn">–£–≤—ñ–π—Ç–∏</button>
    </form>
    <form id="register-form" aria-label="–§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó" style="margin-top:20px;">
      <input type="text" id="reg-username" placeholder="–ù–æ–≤–∏–π –ª–æ–≥—ñ–Ω" autocomplete="username" required aria-required="true" />
      <input type="password" id="reg-password" placeholder="–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å" autocomplete="new-password" required aria-required="true" />
      <button type="submit" id="register-btn">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
    </form>
  </section>
</main>

<div id="bet-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="bet-modal-title" aria-describedby="bet-modal-desc">
  <div class="modal-content">
    <h2 id="bet-modal-title">–ó—Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫—É</h2>
    <p id="bet-modal-desc"></p>
    <input type="number" id="bet-amount" placeholder="–°—É–º–∞ —Å—Ç–∞–≤–∫–∏ –≤ UAH" min="1" aria-label="–°—É–º–∞ —Å—Ç–∞–≤–∫–∏ –≤ –≥—Ä–∏–≤–Ω—è—Ö" />
    <button id="pay-btn">–û–ø–ª–∞—Ç–∏—Ç–∏ —á–µ—Ä–µ–∑ Apple Pay / Google Pay</button>
    <button id="cancel-btn" class="cancel">–í—ñ–¥–º—ñ–Ω–∏—Ç–∏</button>
  </div>
</div>

<footer>
  ¬© 2025 teXbet ‚Äî –±—É–∫–º–µ–∫–µ—Ä—Å—å–∫–∏–π —Å–∞–π—Ç –≤—ñ–¥ –ì–æ–ª–æ–≤–Ω—ñ–Ω–∞ –í–∞–¥–∏–º–∞
</footer>

<script>
  // –ö–ª—é—á API
  const API_KEY = '15687e1fc75dff9890d58aa512214463';
  const SPORT_KEY = 'soccer_epl'; // –ê–Ω–≥–ª—ñ–π—Å—å–∫–∞ –ü—Ä–µ–º'—î—Ä-–ª—ñ–≥–∞
  const ODDS_API_URL = `https://api.the-odds-api.com/v4/sports/${SPORT_KEY}/odds/?apiKey=${API_KEY}&regions=uk&markets=h2h`;

  // DOM –µ–ª–µ–º–µ–Ω—Ç–∏
  const matchesContainer = document.getElementById("matches-container");
  const newsContainer = document.getElementById("news-container");
  const casinoContainer = document.getElementById("casino-container");
  const betModal = document.getElementById("bet-modal");
  const betModalDesc = document.getElementById("bet-modal-desc");
  const betAmountInput = document.getElementById("bet-amount");
  const payBtn = document.getElementById("pay-btn");
  const cancelBtn = document.getElementById("cancel-btn");
  const historyList = document.getElementById("history-list");
  const userInfo = document.getElementById("user-info");

  let currentBetMatch = null;
  let betHistory = [];
  let matches = [];

  // --- –ê–í–¢–û–†–ò–ó–ê–¶–Ü–Ø ---
  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É localStorage (–ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ)
  // userData = { username: string, password: string, balance: number }

  function getUsers() {
    return JSON.parse(localStorage.getItem('teXbet_users') || '{}');
  }
  function saveUsers(users) {
    localStorage.setItem('teXbet_users', JSON.stringify(users));
  }

  function getCurrentUser() {
    return JSON.parse(localStorage.getItem('teXbet_currentUser') || 'null');
  }
  function setCurrentUser(user) {
    localStorage.setItem('teXbet_currentUser', JSON.stringify(user));
  }
  function clearCurrentUser() {
    localStorage.removeItem('teXbet_currentUser');
  }

  function updateUserInfo() {
    const user = getCurrentUser();
    if (user) {
      userInfo.textContent = `–ü—Ä–∏–≤—ñ—Ç, ${user.username}! –ë–∞–ª–∞–Ω—Å: ${user.balance.toFixed(2)} –≥—Ä–Ω`;
    } else {
      userInfo.textContent = '';
    }
  }

  // –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
  const registerForm = document.getElementById('register-form');
  registerForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('reg-username').value.trim();
    const password = document.getElementById('reg-password').value.trim();
    if (!username || !password) return alert('–í–≤–µ–¥—ñ—Ç—å –ª–æ–≥—ñ–Ω —ñ –ø–∞—Ä–æ–ª—å');
    let users = getUsers();
    if (users[username]) {
      alert('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ —Ç–∞–∫–∏–º –ª–æ–≥—ñ–Ω–æ–º –≤–∂–µ —ñ—Å–Ω—É—î');
      return;
    }
    users[username] = { username, password, balance: 1000 }; // —Å—Ç–∞—Ä—Ç–æ–≤–∏–π –±–∞–ª–∞–Ω—Å 1000 –≥—Ä–Ω
    saveUsers(users);
    alert('–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞! –¢–µ–ø–µ—Ä —É–≤—ñ–π–¥—ñ—Ç—å');
    registerForm.reset();
  });

  // –õ–æ–≥—ñ–Ω
  const loginForm = document.getElementById('login-form');
  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    if (!username || !password) return alert('–í–≤–µ–¥—ñ—Ç—å –ª–æ–≥—ñ–Ω —ñ –ø–∞—Ä–æ–ª—å');
    const users = getUsers();
    if (!users[username] || users[username].password !== password) {
      alert('–ù–µ–≤—ñ—Ä–Ω–∏–π –ª–æ–≥—ñ–Ω –∞–±–æ –ø–∞—Ä–æ–ª—å');
      return;
    }
    setCurrentUser(users[username]);
    alert(`–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ, ${username}!`);
    loginForm.reset();
    updateUserInfo();
    // –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Live —Å—Ç–∞–≤–∫–∏ –ø—ñ—Å–ª—è –≤—Ö–æ–¥—É
    activateTab('tab-live');
  });

  // –í–∏—Ö—ñ–¥
  userInfo.addEventListener('click', () => {
    if (getCurrentUser()) {
      if (confirm('–í–∏–π—Ç–∏ –∑ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É?')) {
        clearCurrentUser();
        updateUserInfo();
        alert('–í–∏ –≤–∏–π—à–ª–∏ –∑ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É');
      }
    }
  });

  updateUserInfo();

  // --- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—Ç—á—ñ–≤ ---
  async function fetchMatches() {
    try {
      const response = await fetch(ODDS_API_URL);
      if (!response.ok) throw new Error("–ù–µ –≤–¥–∞–ª–æ—Å—å –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ");
      const data = await response.json();
      matches = data;
      renderMatches();
    } catch (e) {
      matchesContainer.innerHTML = `<p style="color:#ff5555; user-select:none;">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö: ${e.message}</p>`;
    }
  }

  // --- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–∞—Ç—á—ñ–≤ ---
  function renderMatches() {
    matchesContainer.innerHTML = "";
    if (!matches.length) {
      matchesContainer.innerHTML = '<p>–ú–∞—Ç—á—ñ–≤ –Ω–µ–º–∞—î.</p>';
      return;
    }
    matches.forEach(match => {
      // –ë–µ–∑ Live —Å—Ç–∞—Ç—É—Å—É, –∞–ª–µ —î –ø–æ—á–∞—Ç–æ–∫
      const startTime = new Date(match.commence_time);
      const timeStr = startTime.toLocaleString();

      // –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ (h2h = –ø–µ—Ä–µ–º–æ–≥–∞ 1, –Ω—ñ—á–∏—è, –ø–µ—Ä–µ–º–æ–≥–∞ 2)
      let odds1 = null, oddsDraw = null, odds2 = null;
      const h2hMarket = match.bookmakers?.[0]?.markets?.find(m => m.key === "h2h");
      if (h2hMarket) {
        const outcomes = h2hMarket.outcomes;
        odds1 = outcomes.find(o => o.name === match.home_team)?.price ?? null;
        odds2 = outcomes.find(o => o.name === match.away_team)?.price ?? null;
        oddsDraw = outcomes.find(o => o.name === "Draw")?.price ?? null;
      }

      // –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç—ñ–≤ - —ñ–≥–Ω–æ—Ä—É—î–º–æ
      if (!odds1 && !odds2) return;

      // HTML –¥–ª—è –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç—ñ–≤
      let oddsHtml = `
        <div><strong>${odds1?.toFixed(2) ?? "-"}</strong> ${match.home_team}</div>
        ${oddsDraw !== null ? `<div><strong>${oddsDraw.toFixed(2)}</strong> –ù—ñ—á–∏—è</div>` : ''}
        <div><strong>${odds2?.toFixed(2) ?? "-"}</strong> ${match.away_team}</div>
      `;

      const matchDiv = document.createElement("div");
      matchDiv.className = "match";
      matchDiv.innerHTML = `
        <h3>${match.home_team} vs ${match.away_team}</h3>
        <div class="time">–ü–æ—á–∞—Ç–æ–∫: ${timeStr}</div>
        <div class="odds">${oddsHtml}</div>
        <button class="bet-btn" data-id="${match.id}">–ó—Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫—É</button>
      `;
      matchesContainer.appendChild(matchDiv);
    });
    attachBetButtons();
  }

  // --- –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞–≤–∫–∏ ---
  function attachBetButtons() {
    const btns = document.querySelectorAll(".bet-btn");
    btns.forEach(btn => {
      btn.addEventListener("click", () => {
        const id = btn.getAttribute("data-id");
        openBetModal(id);
      });
    });
  }

  // --- –ú–æ–¥–∞–ª–∫–∞ —Å—Ç–∞–≤–∫–∏ ---
  function openBetModal(matchId) {
    if (!getCurrentUser()) {
      alert("–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –∞–±–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å, —â–æ–± —Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫–∏.");
      activateTab('tab-login');
      return;
    }
    currentBetMatch = matches.find(m => m.id == matchId);
    if (!currentBetMatch) return alert("–ú–∞—Ç—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ");
    let oddsText = '';
    const h2hMarket = currentBetMatch.bookmakers?.[0]?.markets?.find(m => m.key === "h2h");
    if (h2hMarket) {
      const outcomes = h2hMarket.outcomes;
      oddsText = outcomes.map(o => `${o.name}: ${o.price.toFixed(2)}`).join(', ');
    }
    betModalDesc.textContent = `–°—Ç–∞–≤–∫–∞ –Ω–∞ –º–∞—Ç—á: ${currentBetMatch.home_team} vs ${currentBetMatch.away_team}. –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏: ${oddsText}`;
    betAmountInput.value = "";
    betModal.classList.add("show");
    betAmountInput.focus();
  }
  function hideModal() {
    betModal.classList.remove("show");
  }

  // --- –û–ø–ª–∞—Ç–∞ —Å—Ç–∞–≤–∫–∏ ---
  payBtn.addEventListener("click", () => {
    if (!getCurrentUser()) {
      alert("–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫—É.");
      activateTab('tab-login');
      hideModal();
      return;
    }
    const amount = parseFloat(betAmountInput.value);
    if (!amount || amount < 1) {
      alert("–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É —Å—Ç–∞–≤–∫–∏ –≤—ñ–¥ 1 –≥—Ä–∏–≤–Ω—ñ");
      betAmountInput.focus();
      return;
    }
    let user = getCurrentUser();
    if (user.balance < amount) {
      alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ.");
      betAmountInput.focus();
      return;
    }
    // –Ü–º—ñ—Ç–∞—Ü—ñ—è –æ–ø–ª–∞—Ç–∏ —á–µ—Ä–µ–∑ Apple Pay / Google Pay
    alert(`–û–ø–ª–∞—Ç–∞ ${amount.toFixed(2)} –≥—Ä–Ω –ø—Ä–æ–π—à–ª–∞ —É—Å–ø—ñ—à–Ω–æ! –°—Ç–∞–≤–∫–∞ –ø—Ä–∏–π–Ω—è—Ç–∞.`);
    user.balance -= amount;
    updateUserBalance(user);
    addBetHistory(currentBetMatch, amount);
    hideModal();
  });

  cancelBtn.addEventListener("click", hideModal);

  // --- –Ü—Å—Ç–æ—Ä—ñ—è —Å—Ç–∞–≤–æ–∫ ---
  function addBetHistory(match, amount) {
    const bet = {
      id: Date.now(),
      match: `${match.home_team} vs ${match.away_team}`,
      amount: amount.toFixed(2),
      time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}),
    };
    betHistory.unshift(bet);
    if (betHistory.length > 10) betHistory.pop();
    renderBetHistory();
  }
  function renderBetHistory() {
    historyList.innerHTML = "";
    betHistory.forEach(bet => {
      const li = document.createElement("li");
      li.textContent = `[${bet.time}] ${bet.match} ‚Äî –°—É–º–∞: ${bet.amount} –≥—Ä–Ω`;
      historyList.appendChild(li);
    });
  }

  // --- –ù–æ–≤–∏–Ω–∏ (—Ñ–µ–π–∫–æ–≤—ñ) ---
  const news = [
    "–ü–µ—Ä–µ–º–æ–≥–∞ –£–∫—Ä–∞—ó–Ω–∏ —É —á–µ–º–ø—ñ–æ–Ω–∞—Ç—ñ —Å–≤—ñ—Ç—É –∑ —Ñ—É—Ç–±–æ–ª—É!",
    "–ù–µ–π–º–æ–≤—ñ—Ä–Ω–∏–π –∫–∞–º–±–µ–∫ –≤—ñ–¥ –ë–∞—Ä—Å–µ–ª–æ–Ω–∏!",
    "–ó–º–∞–≥–∞–Ω–Ω—è UFC –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ —á–µ—Ä–µ–∑ –ø–æ–≥–æ–¥—É.",
    "–õ–µ–π–∫–µ—Ä—Å –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –Ω–æ–≤–∏–π —Ä–µ–∫–æ—Ä–¥ –ø–µ—Ä–µ–º–æ–≥.",
    "–ï–∫—Å–∫–ª—é–∑–∏–≤–Ω–µ —ñ–Ω—Ç–µ—Ä–≤'—é –∑ —á–µ–º–ø—ñ–æ–Ω–æ–º —Å–≤—ñ—Ç—É.",
  ];
  function renderNews() {
    newsContainer.innerHTML = "";
    news.forEach(n => {
      const div = document.createElement("div");
      div.className = "news-item";
      div.textContent = n;
      newsContainer.appendChild(div);
    });
  }

  // --- –ö–∞–∑–∏–Ω–æ (—Ñ–µ–π–∫–æ–≤—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏) ---
  const casinoGames = [
    {name: "Mega Jack", provider: "Pragmatic Play"},
    {name: "Starburst", provider: "NetEnt"},
    {name: "Book of Ra", provider: "Novomatic"},
    {name: "Gonzo's Quest", provider: "NetEnt"},
    {name: "Sweet Bonanza", provider: "Pragmatic Play"},
  ];
  function renderCasino() {
    casinoContainer.innerHTML = "";
    casinoGames.forEach(game => {
      const div = document.createElement("div");
      div.className = "casino-item";
      div.textContent = `${game.name} ‚Äî ${game.provider}`;
      casinoContainer.appendChild(div);
    });
  }

  // --- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ---
  function updateUserBalance(user) {
    let users = getUsers();
    users[user.username] = user;
    saveUsers(users);
    setCurrentUser(user);
    updateUserInfo();
  }

  // --- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –≤–∫–ª–∞–¥–∫–∞—Ö ---
  const tabs = document.querySelectorAll("nav button");
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => {
        t.classList.remove("active");
        document.getElementById(t.getAttribute("aria-controls")).classList.remove("active");
        t.setAttribute("aria-selected", "false");
      });
      tab.classList.add("active");
      tab.setAttribute("aria-selected", "true");
      document.getElementById(tab.getAttribute("aria-controls")).classList.add("active");
    });
  });
  function activateTab(id) {
    tabs.forEach(t => {
      t.classList.remove("active");
      document.getElementById(t.getAttribute("aria-controls")).classList.remove("active");
      t.setAttribute("aria-selected", "false");
    });
    const tab = document.getElementById(id);
    tab.classList.add("active");
    tab.setAttribute("aria-selected", "true");
    document.getElementById(tab.getAttribute("aria-controls")).classList.add("active");
  }

  // –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏ –ø–æ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –Ω–µ—é
  betModal.addEventListener("click", e => {
    if (e.target === betModal) hideModal();
  });
  // –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏ –ø–æ Esc
  window.addEventListener("keydown", e => {
    if (e.key === "Escape" && betModal.classList.contains("show")) hideModal();
  });

  // --- –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –∑–∞–ø—É—Å–∫ ---
  renderNews();
  renderCasino();
  fetchMatches();
  setInterval(fetchMatches, 30000);
  renderBetHistory();

</script>
</body>
</html>

